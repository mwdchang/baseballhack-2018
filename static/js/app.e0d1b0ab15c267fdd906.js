webpackJsonp([1],{"3MPR":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),s=n("fZjL"),i=n.n(s),r=n("Zrlr"),o=n.n(r),l=n("wxAW"),c=n.n(l),d=null,u=function(){function t(){o()(this,t)}return c()(t,null,[{key:"init",value:function(){firebase.initializeApp({apiKey:"AIzaSyDFqeomnCXYFfuIj3iSf5NpHBgRDUXGB4k",authDomain:"tripflow-1509338122882.firebaseapp.com",databaseURL:"https://tripflow-1509338122882.firebaseio.com/"}),d=firebase.database(),console.log("firebase initialized...")}},{key:"readDB",value:function(t){return d.ref(t).once("value")}},{key:"writeDB",value:function(t,e){return d.ref(t).set(e)}}]),t}(),h={},y=function(){function t(){o()(this,t)}return c()(t,null,[{key:"loadBatting",value:function(t){t.forEach(function(t){var e=t.playerID;h.hasOwnProperty(e)||(h[e]={HR:0,AB:0,H:0}),h[e].HR+=+t.HR,h[e].H+=+t.H,h[e].AB+=+t.AB})}},{key:"getPlayer",value:function(t){return h[t]}}]),t}(),f=470,p=470,v=d3.format(","),m={name:"survey",props:["sc"],data:function(){return{scenario:null,showResult:!1}},watch:{sc:function(){null!==this.sc&&(this.showResult=!1,this.canvas=d3.select(".canvas-survey").select("g"),this.canvas.selectAll("*").remove(),this.scenario=_.cloneDeep(this.sc),this.initialize(this.canvas),this.create())}},mounted:function(){},methods:{animate:function(){var t=this,e=d3.select(".canvas-result").select("g");e.selectAll(".player").transition().duration(800).ease(d3.easeLinear).attr("x",function(e){return _.find(t.scenario.players,function(t){return t.id===e.id}).x}).attr("y",function(e){return _.find(t.scenario.players,function(t){return t.id===e.id}).y}),setTimeout(function(){e.selectAll(".player").transition().duration(800).ease(d3.easeLinear).attr("x",function(t){return t.x}).attr("y",function(t){return t.y})},1e3)},view:function(){var t=this;setTimeout(function(){t.showResult=!0,t.processResults()},300)},submit:function(){var t=this,e=(this.canvas.selectAll(".player").data(),(new Date).getTime());u.writeDB("/bh2018"+this.scenario.id+"/"+e,this.scenario.players),this.showResult=!0,setTimeout(function(){t.processResults()},300)},processResults:function(){var t=this;u.readDB("/bh2018"+this.scenario.id).then(function(e){var n=e.val(),a=i()(n).length,s={};_.forEach(n,function(t,e){t.forEach(function(t){var e=t.id;!1===s.hasOwnProperty(e)&&(s[e]={x:0,y:0,img:t.img}),s[e].x+=t.x,s[e].y+=t.y})}),_.forEach(s,function(t,e){t.x/=a,t.y/=a}),t.renderOther(s)})},renderOther:function(t){var e=d3.select(".canvas-chart").select("g");e.selectAll("*").remove();var n=d3.select(".canvas-result").select("g");n.selectAll("*").remove(),this.initialize(n);var a=[];_.forEach(t,function(t,e){a.push({id:e,x:t.x,y:t.y,img:t.img})}),n.selectAll(".player").data(a).enter().append("image").classed("player",!0).attr("xlink:href",function(t){return t.img}).attr("width",50).attr("height",50).attr("x",function(t,e){return t.x}).attr("y",function(t,e){return t.y}).style("opacity",.85).on("mouseover",function(t){var e=y.getPlayer(t.id);n.append("rect").classed("annotation",!0).attr("x",t.x-2).attr("y",t.y-2).attr("width",54).attr("height",54).style("fill","none").style("stroke","#389").style("stroke-width",1),n.append("text").classed("annotation",!0).attr("x",t.x+65).attr("y",t.y+10).style("stroke","none").style("fill","#389").style("font-size","13").text("AB: "+v(e.AB)),n.append("text").classed("annotation",!0).attr("x",t.x+65).attr("y",t.y+30).style("stroke","none").style("fill","#389").style("font-size","13").text("H: "+v(e.H)),n.append("text").classed("annotation",!0).attr("x",t.x+65).attr("y",t.y+50).style("stroke","none").style("fill","#389").style("font-size","13").text("HR: "+v(e.HR))}).on("mouseout",function(){d3.selectAll(".annotation").remove()}).on("click",function(t){var e="https://www.baseball-reference.com/players/"+t.id.substring(0,1)+"/"+t.id+".shtml";window.open(e)});var s=e.selectAll(".bar").data(this.scenario.players).enter().append("g").classed("bar",!0).attr("transform",function(t,e){return"translate(10,"+(5+60*e)+")"});s.append("image").attr("width",50).attr("height",50).attr("xlink:href",function(t){return t.img}).style("cursor","pointer").on("click",function(t){var e="https://www.baseball-reference.com/players/"+t.id.substring(0,1)+"/"+t.id+".shtml";window.open(e)}),s.append("rect").attr("x",50).attr("y",20).attr("height",20).attr("width",function(e){var n=t[e.id];return.25*Math.sqrt((n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y))}).style("fill","#F11")},create:function(){var t=this;this.scenario.players.forEach(function(t){t.x=25+420*Math.random(),t.y=25+420*Math.random()});var e=d3.drag().on("start",function(t){d3.selectAll(".annotation").remove()}).on("drag",function(t){d3.select(this).attr("x",function(){return t.x=d3.event.x,t.x}).attr("y",function(){return t.y=d3.event.y,t.y})}).on("end",function(t){});this.canvas.selectAll(".player").data(this.scenario.players).enter().append("image").classed("player",!0).attr("xlink:href",function(t){return t.img}).attr("width",50).attr("height",50).style("opacity",.85).attr("x",function(t,e){return t.x}).attr("y",function(t,e){return t.y}).on("mouseover",function(e){var n=y.getPlayer(e.id);t.canvas.append("rect").classed("annotation",!0).attr("x",e.x-2).attr("y",e.y-2).attr("width",54).attr("height",54).style("fill","none").style("stroke","#389").style("stroke-width",1),t.canvas.append("text").classed("annotation",!0).attr("x",e.x+65).attr("y",e.y+10).style("stroke","none").style("fill","#389").style("font-size","13").text("AB: "+v(n.AB)),t.canvas.append("text").classed("annotation",!0).attr("x",e.x+65).attr("y",e.y+30).style("stroke","none").style("fill","#389").style("font-size","13").text("H: "+v(n.H)),t.canvas.append("text").classed("annotation",!0).attr("x",e.x+65).attr("y",e.y+50).style("stroke","none").style("fill","#389").style("font-size","13").text("HR: "+v(n.HR))}).on("mouseout",function(){d3.selectAll(".annotation").remove()}).on("click",function(t){var e="https://www.baseball-reference.com/players/"+t.id.substring(0,1)+"/"+t.id+".shtml";window.open(e)}).call(e)},initialize:function(t){d3.select(".survey-container").style("width",p+"px").style("height",f+"px"),d3.select(".result-container").style("width",p+"px").style("height",f+"px"),d3.select(".chart-container").style("width","200px").style("height",f+"px");var e=this.scenario.xaxis,n=this.scenario.yaxis;t.append("rect").attr("x",10).attr("y",235).attr("width",450).attr("height",1).style("stroke",null).style("fill","#AAA"),t.append("rect").attr("x",235).attr("y",10).attr("width",1).attr("height",450).style("stroke",null).style("fill","#AAA"),t.append("text").attr("x",10).attr("y",235).style("font-weight",600).text(e[0]),t.append("text").attr("x",460).attr("y",235).style("font-weight",600).style("text-anchor","end").text(e[1]),t.append("text").attr("x",235).attr("y",20).style("font-weight",600).style("text-anchor","middle").text(n[1]),t.append("text").attr("x",235).attr("y",460).style("font-weight",600).style("text-anchor","middle").text(n[0])}}},x={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-container"},[n("div",{staticClass:"survey"},[t.scenario?n("span",[n("strong",[t._v(t._s(t.scenario.name))])]):t._e(),t._v(" "),n("div",{staticClass:"survey-container"},[n("svg",{staticClass:"canvas-survey"},[n("g")])]),t._v(" "),n("div",{staticStyle:{display:"flex","flex-direction":"row"}},[n("div",{staticClass:"button",on:{click:t.submit}},[t._v("Submit")]),t._v(" "),n("div",{staticClass:"button",on:{click:t.view}},[t._v("View")])])]),t._v(" "),!0===t.showResult?n("div",{staticClass:"result"},[t.scenario?n("span",[n("strong",[t._v(t._s(t.scenario.name)+" (Average opinion)")])]):t._e(),t._v(" "),n("div",{staticClass:"result-container"},[n("svg",{staticClass:"canvas-result"},[n("g")])]),t._v(" "),n("div",{staticClass:"button",on:{click:t.animate}},[t._v("Animate")])]):t._e(),t._v(" "),!0===t.showResult?n("div",{staticClass:"chart"},[t._m(0),t._v(" "),n("div",{staticClass:"chart-container"},[n("svg",{staticClass:"canvas-chart"},[n("g")])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("strong",[this._v("Difference")])])}]};var g=n("VU/8")(m,x,!1,function(t){n("3MPR")},null,null).exports,w=[{id:"thomafr04",img:"https://d3k2oh6evki4b7.cloudfront.net/req/201802130/images/headshots/e/e31675e7_davis.jpg"},{id:"troutmi01",img:"https://d3k2oh6evki4b7.cloudfront.net/req/201802130/images/headshots/f/f322d40f_mlbam.jpg"},{id:"hamiljo03",img:"https://d3k2oh6evki4b7.cloudfront.net/req/201802130/images/headshots/c/c5530155_mlbam.jpg"},{id:"belleal01",img:"https://d3k2oh6evki4b7.cloudfront.net/req/201802130/images/headshots/1/1d993b9b_davis.jpg"},{id:"kershcl01",img:"https://d3k2oh6evki4b7.cloudfront.net/req/201802130/images/headshots/0/0caa3053_mlbam.jpg"},{id:"harpebr03",img:"https://d3k2oh6evki4b7.cloudfront.net/req/201802130/images/headshots/c/c61e922e_mlbam.jpg"},{id:"stantmi03",img:"https://d3k2oh6evki4b7.cloudfront.net/req/201802130/images/headshots/8/87f6986b_mlbam.jpg"}],k=[{id:"hall-worth",name:"Hall of fame worthy",players:w,xaxis:["Underrated","Overrated"],yaxis:["Replacement-level","Hall worthy"]},{id:"talented-jerk",name:"Talented or just a jerk",players:w,xaxis:["Jerk","Nice"],yaxis:["Pedestrian","Talented"]},{id:"bench-or-start",name:"Starter or bench warmer",players:w,xaxis:["Bench","Start"],yaxis:["",""]},{id:"sc4",name:"Taking our the aggresions",players:w,xaxis:["Too passive","Too aggressive"],yaxis:["Bad player","Good player"]},{id:"sc5",name:"Contract salary - what do they deserve",players:w,xaxis:["1 million","15 million"],yaxis:["1 year","7 years"]},{id:"sc6",name:"Worst signing/trade ever",players:w,xaxis:["Worst","Best"],yaxis:["Low impact","High impact"]}],b=function(){function t(){o()(this,t)}return c()(t,null,[{key:"getScenario",value:function(){return k[4]}},{key:"getRandomScenario",value:function(){var t=Math.floor(Math.random()*k.length);return k[t]}}]),t}(),A={name:"App",data:function(){return{scenario:null}},components:{Survey:g},mounted:function(){u.init(),this.scenario=b.getScenario(),d3.csv("static/Batting.csv",function(t){y.loadBatting(t)})},methods:{switchScenario:function(){this.scenario=b.getRandomScenario()}}},R={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("h2",[this._v("The Opinionator "),e("i",{staticClass:"fa fa-refresh refresh",on:{click:this.switchScenario}})]),this._v(" "),this._m(0),this._v(" "),e("survey",{attrs:{sc:this.scenario}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("small",[this._v("Your opinion matters!!")])])}]};var H=n("VU/8")(A,R,!1,function(t){n("gO+W")},null,null).exports;a.a.config.productionTip=!1,new a.a({el:"#app",components:{App:H},template:"<App/>"})},"gO+W":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.e0d1b0ab15c267fdd906.js.map